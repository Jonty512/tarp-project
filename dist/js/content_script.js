(()=>{var e,t={81777:function(e,t,o){"use strict";var n=o(25108),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const l=i(o(9669)),c=i(o(87958)),s=a(o(94085)),u=o(66101),d=o(96297),f=i(o(53758)),p=a(o(81134));jQuery.fn.extend({getPath(){let e,t=this;for(;t.length;){n.log("node is"),n.log(t);const o=t[0];let{name:r}=o;if(!r)break;r=r.toLowerCase();const i=t.parent();if(i.children(r).length>1){const e=i.children().index(o)+1;e>1&&(r+=`:nth-child(${e})`)}e=r+(e?`>${e}`:""),t=i}return n.log("inside path fn"),n.log(e),e}});const h=()=>{$("*").not("body, html").hover((function(e){$(this).css("border","1px solid #000"),e.stopPropagation()}),(function(e){$(this).css("border","0px"),e.stopPropagation()})),$(window).click((e=>{$("*").not("body,html").on("mouseenter",(function(){$(this).css("border","none")})),$(window).off("click");const t=c.default(e.target,{selectors:["tag","class"]});var o,i,a;return o=$(e.target).prop("tagName"),i=t,a=$(e.target).find("img"),r(void 0,void 0,void 0,(function*(){let e="text";n.log(i),(a.length>0||"IMG"===o)&&(e="image");try{const t=yield d.getConfig(),o=yield l.default.post("https://eng-hack.herokuapp.com/community/report",{url:window.location.href,contentType:e,vote:0,selector:i,userId:t.userid});n.log(o.data),o.data.error?alert(o.data.msg):(p.blurFlaggedItem({selector:i,contentType:e},t.text,t.images),alert("The content was flagged successfully!"))}catch(e){n.log("error"),n.log(e)}})),!1}))};chrome.runtime.onMessage.addListener((e=>{switch(n.log(e),e.data){case"start-overlay":h()}})),chrome.storage.onChanged.addListener((e=>r(void 0,void 0,void 0,(function*(){const t=yield d.getConfig();e.images&&(e.images.newValue?u.FilterAllImagesOnPage(t.level):u.UnfilterAllImagesOnPage()),e.text&&(e.text.newValue?s.default(t.level):s.InstagramTextUnFilter()),e.level&&(t.images&&u.FilterAllImagesOnPage(e.level.newValue),t.text&&s.default(e.level.newValue)),p.default(t.text,t.images)})))),window.onload=()=>r(void 0,void 0,void 0,(function*(){f.default();const e=yield d.getConfig();e.images&&u.FilterAllImagesOnPage(e.level),window.location.href.match(/https:\/\/(www\.|)twitter\.com\/p\/\w+/)&&setTimeout((()=>{e.text&&s.default(e.level)}),1e3),p.default(e.text,e.images)}))},81134:function(e,t,o){"use strict";var n=o(25108),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(9669)),l=o(16624);function c(e,t=!1,o=!1){try{const n=document.querySelector(e.selector);n&&("text"===e.contentType&&(t?l.CreateBlurOverlay(n,10,"This content was flagged by the community."):l.RemoveBlurOverlay(n)),"image"===e.contentType&&(o?l.CreateBlurOverlay(n,10,"This content was flagged by the community."):l.RemoveBlurOverlay(n)))}catch(e){n.log(e)}}t.blurFlaggedItem=c,t.default=function(e=!1,t=!1){return r(this,void 0,void 0,(function*(){(yield a.default.get("https://eng-hack.herokuapp.com/community/report",{params:{url:window.location.href}})).data.reports.forEach((o=>{c(o,e,t)}))}))}},94085:function(e,t,o){"use strict";var n=o(25108),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(16624),l=i(o(15743)),c="css-901oao r-1nao33i r-37j5jr r-a023e6 r-16dba41 r-rjixqe r-bcqeeo r-bnwqim r-qvutc0";function s(){return r(this,void 0,void 0,(function*(){[...document.getElementsByClassName(c)].map(a.RemoveBlurOverlay)}))}t.InstagramTextUnFilter=s,t.default=function(e){return r(this,void 0,void 0,(function*(){if(0===e)return s();const t=[...document.getElementsByClassName(c)];return Promise.all(t.map((t=>r(this,void 0,void 0,(function*(){n.log(t.innerText);const o=yield l.default(t.innerText,e);o.filter&&(n.log(o),a.CreateBlurOverlay(t,4,o.reason))})))))}))}},66101:function(e,t,o){"use strict";var n=o(25108),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(o(79190)),c=o(16624),s=a(o(29124));let u;function d(e,t){return r(this,void 0,void 0,(function*(){if(e.clientWidth<50)return{filter:!1,reason:"The image is too small"};const o=new Image(200,200);o.crossOrigin="anonymous",o.src=e.src;const i=(yield function(e){return r(this,void 0,void 0,(function*(){for(;!u;)yield s.default(1e3);return u.classify(e)}))}(o))[0];return"Neutral"===i.className||"Drawing"===i.className?{filter:!1,reason:"The image is neutral."}:(n.log(i.probability,1-t/100),i.probability<1-t/100?{filter:!1,reason:"The image is below the given threshold."}:{filter:!0,reason:"The image has NSFW content which is over the configured threshold."})}))}function f(){return r(this,void 0,void 0,(function*(){[...document.querySelectorAll("img")].map(c.RemoveBlurOverlay)}))}l.load("https://d1zv2aa70wpiur.cloudfront.net/tfjs_quant_nsfw_mobilenet/").then((e=>{u=e})),t.default=d,t.filterImages=function(e){return r(this,void 0,void 0,(function*(){const t=[];for(const o of e){const e=yield d(o,.5);t.push(e),yield s.default(50)}return t}))},t.UnfilterAllImagesOnPage=f,t.FilterAllImagesOnPage=function(e){return r(this,void 0,void 0,(function*(){if(0===e)return void f();const t=[...document.querySelectorAll("img")];t.map((e=>c.CreateBlurOverlay(e)));const o=t.map((t=>r(this,void 0,void 0,(function*(){try{const o=yield d(t,e||.5);o.filter?(c.RemovePopover(t),setTimeout((()=>{c.AddPopover(t,o.reason)}),1e3)):c.RemoveBlurOverlay(t)}catch(e){n.log(e)}}))));yield Promise.all(o)}))}},15743:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(o(9669));t.default=function(e,t){return n(this,void 0,void 0,(function*(){if(!e)return{filter:!1,reason:"No text was detected here"};const o=yield i.default.post("https://eng-hack.herokuapp.com/check/text",{text:e}),{data:n}=o.data,r=function(e,t){const o={};return Object.keys(e).forEach((n=>{e[n]>1.5-(t/200+.5)&&(o[n]=e[n])})),o}(n,t),a=Object.keys(r);return 0===a.length?{filter:!1,reason:"None of the parameters crossed the threshold on the given text"}:{filter:!0,reason:`The text contains following qualities above threshold: ${a.join(", ")}`}}))}},96297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=function(){return new Promise((e=>{chrome.storage.sync.get(["userid","level","text","videos","images"],(t=>{e(t)}))}))},t.setConfig=function(e){return new Promise((t=>{chrome.storage.sync.set(e,(()=>{t(!0)}))}))}},16624:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(78689));function i(e,t){const o=e;o._tippy||r.default(o,{content:t||"Blurred by Blurrer!"})}function a(e){const t=e;t._tippy&&t._tippy.destroy()}t.BlurAllImages=function(){const e=document.createElement("style");e.id="detox-blur-image",e.appendChild(document.createTextNode("\n  img {\n    filter: blur(50px);\n  }\n  ")),document.head.appendChild(e)},t.RemoveBlurAllImages=function(){const e=document.getElementById("detox-blur-image");e&&document.head.removeChild(e)},t.AddPopover=i,t.RemovePopover=a,t.CreateBlurOverlay=function(e,t,o){const n=e;n.style.filter=`blur(${t||50}px)`,n.style.userSelect="none",i(n,o)},t.RemoveBlurOverlay=function(e){const t=e;t.style.removeProperty("filter"),t.style.userSelect="auto",a(t)}},53758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=document.createElement("style");e.appendChild(document.createTextNode('.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}')),document.head.appendChild(e)}},29124:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>new Promise((t=>setTimeout(t,e)))},75410:()=>{},48628:()=>{},31601:()=>{},67792:()=>{},56247:()=>{},52361:()=>{},94616:()=>{},75042:()=>{}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},e=[],n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(s=0;s<e.length;s++){for(var[o,r,i]=e[s],l=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](o[c])))?o.splice(c--,1):(l=!1,i<a&&(a=i));l&&(e.splice(s--,1),t=r())}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[o,r,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=828,(()=>{var e={828:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,l,c]=o,s=0;for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(c)var u=c(n);for(t&&t(o);s<a.length;s++)i=a[s],n.o(e,i)&&e[i]&&e[i][0](),e[a[s]]=0;return n.O(u)},o=self.webpackChunkchrome_extension_typescript_starter=self.webpackChunkchrome_extension_typescript_starter||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=n.O(void 0,[736],(()=>n(81777)));r=n.O(r)})();